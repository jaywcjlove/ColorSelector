<div markdown="1">
  <sup>Using <a href="https://wangchujiang.com/#/app" target="_blank">my app</a> is also a way to <a href="https://wangchujiang.com/#/sponsor" target="_blank">support</a> me:</sup>
  <br>
  <a target="_blank" href="https://apps.apple.com/app/Keyzer/6500434773" title="Keyzer for macOS"><img alt="Keyzer" height="52" width="52" src="https://wangchujiang.com/appicon/keyzer.png"></a>
  <a target="_blank" href="https://github.com/jaywcjlove/vidwall-hub" title="Vidwall Hub for macOS"><img alt="Vidwall Hub" height="52" width="52" src="https://wangchujiang.com/appicon/vidwall-hub.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/VidCrop/6752624705" title="VidCrop for macOS"><img alt="VidCrop" height="52" width="52" src="https://wangchujiang.com/appicon/vidcrop.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/Vidwall/6747587746" title="Vidwall for macOS"><img alt="Vidwall" height="52" width="52" src="https://wangchujiang.com/appicon/vidwall.png"></a>
  <a target="_blank" href="https://wangchujiang.com/mousio-hint/" title="Mousio Hint for macOS"><img alt="Mousio Hint" height="52" width="52" src="https://wangchujiang.com/appicon/mousio-hint.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6746747327" title="Mousio for macOS"><img alt="Mousio" height="52" width="52" src="https://wangchujiang.com/appicon/mousio.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6745227444" title="Musicer for macOS"><img alt="Musicer" height="52" width="52" src="https://wangchujiang.com/appicon/musicer.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6743841447" title="Audioer for macOS"><img alt="Audioer" height="52" width="52" src="https://wangchujiang.com/appicon/audioer.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6744690194" title="FileSentinel for macOS"><img alt="FileSentinel" height="52" width="52" src="https://wangchujiang.com/appicon/file-sentinel.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6743495172" title="FocusCursor for macOS"><img alt="FocusCursor" height="52" width="52" src="https://wangchujiang.com/appicon/focus-cursor.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6742680573" title="Videoer for macOS"><img alt="Videoer" height="52" width="52" src="https://wangchujiang.com/appicon/videoer.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6740425504" title="KeyClicker for macOS"><img alt="KeyClicker" height="52" width="52" src="https://wangchujiang.com/appicon/key-clicker.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6739052447" title="DayBar for macOS"><img alt="DayBar" height="52" width="52" src="https://wangchujiang.com/appicon/daybar.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6739444407" title="Iconed for macOS"><img alt="Iconed" height="52" width="52" src="https://wangchujiang.com/appicon/iconed.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6737160756" title="Mousio for macOS"><img alt="Mousio" height="52" width="52" src="https://wangchujiang.com/appicon/rightmenu-master.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6723903021" title="Paste Quick for macOS"><img alt="Quick RSS" height="52" width="52" src="https://wangchujiang.com/appicon/paste-quick.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6670696072" title="Quick RSS for macOS/iOS"><img alt="Quick RSS" height="52" width="52" src="https://wangchujiang.com/appicon/quick-rss.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6670167443" title="Web Serve for macOS"><img alt="Web Serve" height="52" width="52" src="https://wangchujiang.com/appicon/web-serve.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6503953628" title="Copybook Generator for macOS/iOS"><img alt="Copybook Generator" height="52" width="52" src="https://wangchujiang.com/appicon/copybook-generator.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6471227008" title="DevTutor for macOS/iOS"><img alt="DevTutor for SwiftUI" height="52" width="52" src="https://wangchujiang.com/appicon/devtutor.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6479819388" title="RegexMate for macOS/iOS"><img alt="RegexMate" height="52" width="52" src="https://wangchujiang.com/appicon/regex-mate.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6479194014" title="Time Passage for macOS/iOS"><img alt="Time Passage" height="52" width="52" src="https://wangchujiang.com/appicon/time-passage.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6478772538" title="IconizeFolder for macOS"><img alt="Iconize Folder" height="52" width="52" src="https://wangchujiang.com/appicon/iconize-folder.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6478511402" title="Textsound Saver for macOS/iOS"><img alt="Textsound Saver" height="52" width="52" src="https://wangchujiang.com/appicon/textsound-saver.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6476924627" title="Create Custom Symbols for macOS"><img alt="Create Custom Symbols" height="52" width="52" src="https://wangchujiang.com/appicon/create-custom-symbols.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6476452351" title="DevHub for macOS"><img alt="DevHub" height="52" width="52" src="https://wangchujiang.com/appicon/devhub.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6476400184" title="Resume Revise for macOS"><img alt="Resume Revise" height="52" width="52" src="https://wangchujiang.com/appicon/resume-revise.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6472593276" title="Palette Genius for macOS"><img alt="Palette Genius" height="52" width="52" src="https://wangchujiang.com/appicon/palette-genius.png"></a>
  <a target="_blank" href="https://apps.apple.com/app/6470879005" title="Symbol Scribe for macOS"><img alt="Symbol Scribe" height="52" width="52" src="https://wangchujiang.com/appicon/symbol-scribe.png"></a>
</div>
<hr>

ColorSelector
===

A SwiftUI color picker component library for macOS, designed to replace the default ColorPicker component. In addition, I’ve created another component library, [Colorful](https://github.com/jaywcjlove/Colorful), which offers a different user experience with a distinct style.

![ColorSelector for macOS/iOS](https://github.com/user-attachments/assets/aab49a01-6c3d-40e7-86c2-4013f2b8cc8d)

Welcome to download [DevTutor](https://apps.apple.com/app/devtutor/id6471227008), a cheat sheet app designed to help developers quickly build excellent applications using SwiftUI.

<p>
  <a target="_blank" href="https://apps.apple.com/app/devtutor/id6471227008" title="DevTutor for SwiftUI AppStore"><img alt="DevTutor for SwiftUI AppStore" src="https://jaywcjlove.github.io/sb/download/macos.svg" height="51">
  </a>
</p>

## Usage

```swift
import ColorSelector

struct ContentView: View {
    @State var color: Color? = .red
    @State var colorClear: Color? = .clear
    @State var nsColor: NSColor? = NSColor.red
    
    var body: some View {
        ColorSelector("Color", selection: $color)
        ColorSelector(selection: $colorClear)
        ColorSelector(nsColor: $nsColor, arrowEdge: .top)
        ColorSelector(selection: $color) {
            Text("Color Picker")
        }
    }
}
```

Using the `swatchColors` environment value, developers can customize the color list in the color selector, replacing the default color options.

```swift
struct ContentView: View {
    @State var color: Color? = .red
    
    var body: some View {
        ColorSelector(selection: $color)
            .environment(\.swatchColors, [
                NSColor(hue: 0.999, saturation: 0.857, brightness: 0.878, alpha: 1.0),
                NSColor(hue: 0.066, saturation: 1.000, brightness: 0.980, alpha: 1.0),
                NSColor(hue: 0.121, saturation: 0.976, brightness: 0.969, alpha: 1.0),
            ])
        ///     
        ColorSelector(selection: $colorClear, arrowEdge: .top)
    }
}
```

By setting the `cornerSize` (corner radius) and `pointSize` (point size) environment values, the corner radius and point size can be dynamically adjusted.

```swift
struct ContentView: View {
    @State var color: Color? = .red
    @State var cornerRadius: CGFloat = 6
    @State var pointSize: CGSize = .init(width: 12, height: 12)
    
    var body: some View {
        ColorSelector(selection: $color)
            .environment(\.cornerSize, cornerRadius)
            .environment(\.pointSize, pointSize)
    }
}
```

**arrowEdge**: The edge of the attachmentAnchor that defines the location of the popover’s arrow. The default is nil, which results in the system allowing any arrow edge.

```swift
import ColorSelector

struct ContentView: View {
    @State var colorClear: Color? = .clear
    
    var body: some View {
        ColorSelector(selection: $colorClear, arrowEdge: .bottom)
    }
}
```

Use the `showsAlpha` modifier to control the visibility of the alpha (opacity) slider in the picker panel.

```swift
import ColorSelector

struct ContentView: View {
    @State var color: Color? = .clear
    
    var body: some View {
        ColorSelector(selection: $color)
            .showsAlpha(false)
    }
}
```

Customize button size using the `controlSize` modifier

```swift
ColorSelector(selection: $color)
    .controlSize(.regular)
```

Set panel size

```swift
ColorSelector(selection: $color)
    .pickerSize(.constant(.init(width: 180, height: 280)))
```

Add content to the bottom of the panel

```swift
ColorSelector(selection: $color, footer: {
    Text("Hello World")
}) {
    Text("Color Picker Footer")
}
```

### ColorSelector Modifier

The `colorSelectorPopover` modifier provides an easy way to add color picker functionality to any view. The modifier attaches a popover that shows when triggered externally.

```swift
struct ContentView: View {
    @State private var backgroundColor: Color? = .blue
    @State private var showColorPicker = false
    
    var body: some View {
        Text("Background Color")
            .padding()
            .background(backgroundColor ?? .clear)
            .onTapGesture {
                showColorPicker = true
            }
            .colorSelectorPopover(
                selection: $backgroundColor,
                isPresented: $showColorPicker
            )
    }
}
```

**Basic usage with external popover control:**

```swift
@State private var textColor: Color? = .primary
@State private var showTextPicker = false

Button("Choose Text Color") {
    showTextPicker = true
}
.colorSelectorPopover(
    selection: $textColor,
    isPresented: $showTextPicker,
    showsAlpha: false
)
```

**Using NSColor binding:**

```swift
@State private var shadowColor: NSColor? = NSColor.gray
@State private var showShadowPicker = false

Text("Shadow Color")
    .onTapGesture { showShadowPicker = true }
    .colorSelectorPopover(
        nsColor: $shadowColor,
        isPresented: $showShadowPicker,
        arrowEdge: .top
    )
```

**Available parameters:**

- `selection`: A binding to the selected Color
- `nsColor`: A binding to the selected NSColor (alternative to selection)
- `isPresented`: A binding to control popover visibility
- `arrowEdge`: The edge where the popover arrow appears (default: system decides)
- `showsAlpha`: Whether to show alpha controls (default: true)

### ColorSelectorButton

The `ColorSelectorButton` is a standalone button component that displays the current selected color and can trigger a popover when tapped. This component provides the visual color representation without the popover functionality built-in.

```swift
struct ContentView: View {
    @State private var selectedColor: Color? = .blue
    @State private var showColorPicker = false
    @State private var buttonSize: ControlSize = .regular
    
    var body: some View {
        VStack(spacing: 20) {
            // Color selector button
            ColorSelectorButton(
                popover: $showColorPicker,
                selection: $selectedColor,
                controlSize: $buttonSize
            )
            
            // Display current color
            Text("Selected: \(selectedColor?.description ?? "None")")
        }
        .colorSelectorPopover(
            selection: $selectedColor,
            isPresented: $showColorPicker
        )
    }
}
```

**Customize button size:**

```swift
@State private var buttonSize: ControlSize = .large

ColorSelectorButton(
    popover: $showColorPicker,
    selection: $selectedColor,
    controlSize: $buttonSize
)
```

**Available control sizes:** `.mini`, `.small`, `.regular`, `.large`, `.extraLarge`

### AlphaSlider

```swift
struct ContentView: View {
    @State var alpha: CGFloat = 1.0
    var saturation: CGFloat = 1.0
    var brightness: CGFloat = 1.0
    var hue: CGFloat = 0.0
    
    var body: some View {
        AlphaSlider(
            alpha: $alpha,
            hue: hue,
            saturation: saturation,
            brightness: brightness
        )
    }
}
```

### ColorSampler

```swift
struct ContentView: View {
    @State var color: Color = Color.red
    var cornerRadius: CGFloat = 6
    var pointSize: CGSize = .init(width: 8, height: 8)
    
    var body: some View {
        ColorSampler(
            color: $color,
            cornerRadius: cornerRadius,
            pointSize: pointSize
        )
    }
}
```

You can customize the width and height of the rectangle using the `rectSize` modifier.

```swift
#Preview {
    @Previewable @State var color: Color? = Color.blue
    ColorSampler(color: $color)
        .rectSize(23)
}
```

### HueSlider

```swift
struct ContentView: View {
    @State var hue: CGFloat = 1
    
    var body: some View {
        HueSlider(hue: $hue)
    }
}
```

### Saturation

```swift
struct ContentView: View {
    @State var saturation: CGFloat = 1.0
    @State var brightness: CGFloat = 1.0
    var hue: CGFloat = 0.0
    
    var body: some View {
        Saturation(
            saturation: $saturation,
            brightness: $brightness,
            hue: hue,
            cornerRadius: 16
        )
    }
}
```

### Swatch

```swift
struct ContentView: View {
    @State var color: NSColor = NSColor.white
    
    var body: some View {
        Swatch()
        Swatch(nsColor: color) { value in
            color = value
        }
    }
}
```

### Sketch

```swift
struct ContentView: View {
    @State var saturation: CGFloat = 1.0
    @State var brightness: CGFloat = 1.0
    @State var hue: CGFloat = 0.0
    @State var alpha: CGFloat = 1.0
    
    var body: some View {
        Sketch(
            hue: $hue,
            saturation: $saturation,
            brightness: $brightness,
            alpha: $alpha
        )
        .frame(width: 180, height: 230)
    }
}
```

## License

Licensed under the MIT License.
